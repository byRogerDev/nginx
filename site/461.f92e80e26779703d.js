"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[461],{2461:(Ft,Z,l)=>{l.r(Z),l.d(Z,{AccountModule:()=>ft});var d=l(6895),F=l(2222),y=l(7396),Q=l(2271),i=l(4006),L=l(5415),O=l(2851),v=l(3056),Y=l(3714),_=l(9197),m=l(5783),e=l(4650),u=l(5412),w=l(8253),p=l(6713),x=l(3071),P=l(3315),M=l(6574),N=l(6435),T=l(5880),A=l(4487),c=l(4572);function B(r,o){1&r&&e._UZ(0,"i",4)}function D(r,o){1&r&&e._UZ(0,"i",5)}function G(r,o){1&r&&e._UZ(0,"i",6)}function k(r,o){1&r&&e._UZ(0,"i",7)}const R=["*"];let V=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["user-icon"]],inputs:{user:"user"},ngContentSelectors:R,decls:6,vars:4,consts:[["class","fa fa-user text-primary fa-lg",4,"ngIf"],["class","fas fa-user-shield fa-lg",4,"ngIf"],["class","fas fa-users text-danger fa-lg",4,"ngIf"],["class","fa fa-users-cog text-success fa-lg",4,"ngIf"],[1,"fa","fa-user","text-primary","fa-lg"],[1,"fas","fa-user-shield","fa-lg"],[1,"fas","fa-users","text-danger","fa-lg"],[1,"fa","fa-users-cog","text-success","fa-lg"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"span"),e.YNc(1,B,1,0,"i",0),e.YNc(2,D,1,0,"i",1),e.YNc(3,G,1,0,"i",2),e.YNc(4,k,1,0,"i",3),e.Hsn(5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.user.isClient),e.xp6(1),e.Q6J("ngIf",n.user.isAdmin||n.user.isDeveloper),e.xp6(1),e.Q6J("ngIf",n.user.isManufacturer),e.xp6(1),e.Q6J("ngIf",n.user.isController))},dependencies:[d.O5]}),r})();var j=l(4748),I=l(3683),E=l(7392),J=l(4859);let H=(()=>{class r{constructor(t,n){this.dialogRef=t,this.data=n,this.inputValue=""}ngOnInit(){}accept(){this.dialogRef.close(this.inputValue)}cancel(){this.dialogRef.close("")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.so),e.Y36(u.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-input-text-modal"]],decls:21,vars:6,consts:[[1,"bg-gradient-custom",3,"color"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],[1,"container"],[1,"row"],[1,"col-12",3,"innerHTML"],["type","text","id","inputValue","required","",1,"form-control","input-group-lg",3,"ngModel","ngModelChange"],[1,"col-6"],["type","submit",1,"btn","btn-secondary","btn-block","my-4","w-100","mb-0",3,"click"],["type","submit",1,"btn","btn-primary","btn-block","my-4","w-100","mb-0",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"span",1),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.cancel()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()(),e.TgZ(8,"div")(9,"div",3)(10,"div",4),e._UZ(11,"div",5),e.TgZ(12,"div")(13,"input",6),e.NdJ("ngModelChange",function(a){return n.inputValue=a}),e.qZA()()(),e.TgZ(14,"div",4)(15,"div",7)(16,"button",8),e.NdJ("click",function(){return n.cancel()}),e._uU(17),e.qZA()(),e.TgZ(18,"div",7)(19,"button",9),e.NdJ("click",function(){return n.accept()}),e._uU(20),e.qZA()()()()()),2&t&&(e.s9C("color",n.data.ClassType),e.xp6(3),e.Oqu(n.data.Title),e.xp6(8),e.Q6J("innerHTML",n.data.Body,e.oJD),e.xp6(2),e.Q6J("ngModel",n.inputValue),e.xp6(4),e.hij(" ",n.data.BtnCancel," "),e.xp6(3),e.hij(" ",n.data.BtnAccept," "))},dependencies:[i.Fj,i.JJ,i.Q7,i.On,I.Ye,I.rD,E.Hw,J.lW],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),r})();var q=l(5354),b=l(7583),C=l(8270),U=l(3848),K=l(5794),g=l(3546);function z(r,o){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"El Nombre es requerido."),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"div",11),e._uU(6),e.qZA(),e.TgZ(7,"div",11),e._uU(8,"No se aceptan n\xfameros."),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Name.errors&&t.Name.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Name.errors&&t.Name.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Name.errors||null==t.Name.errors.minlength?null:t.Name.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Name.errors&&t.Name.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Name.errors||null==t.Name.errors.maxlength?null:t.Name.errors.maxlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Name.errors&&t.Name.errors.pattern))}}function X(r,o){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"El primer apellido es requerido."),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"div",11),e._uU(6),e.qZA(),e.TgZ(7,"div",11),e._uU(8,"No se aceptan n\xfameros."),e.qZA()()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("hidden",!(null!=t.FirstName.errors&&t.FirstName.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.FirstName.errors&&t.FirstName.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.FirstName.errors||null==t.FirstName.errors.minlength?null:t.FirstName.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.FirstName.errors&&t.FirstName.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.FirstName.errors||null==t.FirstName.errors.maxlength?null:t.FirstName.errors.maxlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.FirstName.errors&&t.FirstName.errors.pattern))}}function $(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",12),e._uU(2,"Primer Apellido"),e.qZA(),e.TgZ(3,"input",13),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.user.apellidos=s)}),e.qZA(),e.YNc(4,X,9,6,"div",8),e.qZA()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.user.apellidos),e.xp6(1),e.Q6J("ngIf",t.FirstName.invalid&&(t.FirstName.dirty||t.FirstName.touched))}}function W(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(2,"h2",3),e._uU(3,"Datos generales"),e.qZA(),e.TgZ(4,"mat-card",4)(5,"div",5)(6,"label",6),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.nombre=s)}),e.qZA(),e.YNc(9,z,9,6,"div",8),e.qZA(),e.YNc(10,$,5,2,"div",9),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.editForm),e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(4),e.Q6J("ngModel",t.user.nombre),e.xp6(1),e.Q6J("ngIf",t.Name.invalid&&(t.Name.dirty||t.Name.touched)),e.xp6(1),e.Q6J("ngIf",t.user.isAdmin||t.user.isClient)}}let ee=(()=>{class r{constructor(t,n,s,a,h,f){this.dialog=t,this.formBuilder=n,this.authSrv=s,this.emailSrv=a,this.usersSrv=h,this.utilsSrv=f,this.loading=!0,this.editForm=this.formBuilder.group({}),this.editFormShared=new e.vpe}emitFormGeneral(){this.editFormShared.emit(this.editForm)}ngOnInit(){this.userEdit=this.user,this.changeForm(),this.user?.isClient&&this.changeCompany(),this.emitFormGeneral(),this.loading=!1}updateParen(){}onSubmit(){console.log(this.userEdit),console.log(this.Name.errors?.minlength?.requiredLength),console.log(this.Name.errors?.maxlength?.requiredLength),console.log(this.editForm.errors)}get Name(){return this.editForm.get("User").get("Name")}get FirstName(){return this.editForm.get("User").get("FirstName")}get LastName(){return this.editForm.get("User").get("LastName")}get WorkerCode(){return this.editForm.get("User").get("WorkerCode")}get TypeDocument(){return this.editForm.get("User").get("TypeDocument")}get DNICIF(){return this.editForm.get("User").get("DNICIF")}get CreditCard(){return this.editForm.get("User").get("CreditCard")}get IsSeller(){return this.editForm.get("User").get("IsSeller")}changeForm(){console.log("changeForm"),this.editForm.removeControl("User"),this.user.isClient&&!this.authSrv.isManufacturer()?this.editForm.addControl("User",this.addUserForm()):this.user.isClient&&this.authSrv.isManufacturer()?this.editForm.addControl("User",this.addUserFabricantForm()):this.user.isAdmin?this.editForm.addControl("User",this.addAdminForm()):this.user.isManufacturer&&this.editForm.addControl("User",this.addFabricantForm())}formControlName(){return new i.NI(this.user.nombre,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(35)])}formControlFirstName(){return new i.NI(this.user.apellidos,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(50)])}addUserForm(){return this.formBuilder.group({Name:this.formControlName(),FirstName:this.formControlFirstName()})}addUserFabricantForm(){return this.formBuilder.group({Name:this.formControlName(),FirstName:this.formControlFirstName()})}addFabricantForm(){return this.formBuilder.group({Name:this.formControlName()})}addAdminForm(){return this.formBuilder.group({Name:this.formControlName(),FirstName:this.formControlFirstName()})}changeCompany(){this.editForm.get("User")?.get("Name").updateValueAndValidity(),this.editForm.get("User")?.get("FirstName").updateValueAndValidity()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(p.$),e.Y36(K.j),e.Y36(b.f),e.Y36(C.F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user"]],inputs:{user:"user",page:"page"},outputs:{editFormShared:"editFormShared"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],["autocomplete","off",1,"text-start","p-2",3,"formGroup","ngSubmit"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","User",1,"solution"],[1,"form-group"],["for","Name"],["type","text","id","Name","formControlName","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger mt-3 text-start",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"alert","alert-danger","mt-3","text-start"],[3,"hidden"],["for","FirstName"],["type","text","id","FirstName","formControlName","FirstName","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,W,11,10,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.user))},dependencies:[d.O5,g.a8,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,i.x0,c.B],styles:["label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.form-group[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}form[_ngcontent-%COMP%]{border:0px;box-shadow:none}"]}),r})();function te(r,o){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2,"La direcci\xf3n es requerida."),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Address.errors&&t.Address.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Address.errors&&t.Address.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Address.errors||null==t.Address.errors.minlength?null:t.Address.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Address.errors&&t.Address.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Address.errors||null==t.Address.errors.maxlength?null:t.Address.errors.maxlength.requiredLength," caracteres.")}}function re(r,o){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2,"El codigo postal es requerida."),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.CP.errors&&t.CP.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.CP.errors&&t.CP.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.CP.errors||null==t.CP.errors.minlength?null:t.CP.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.CP.errors&&t.CP.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.CP.errors||null==t.CP.errors.maxlength?null:t.CP.errors.maxlength.requiredLength," caracteres.")}}function ne(r,o){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2,"El poblaci\xf3n es requerida."),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Population.errors&&t.Population.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Population.errors&&t.Population.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Population.errors||null==t.Population.errors.minlength?null:t.Population.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Population.errors&&t.Population.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Population.errors||null==t.Population.errors.maxlength?null:t.Population.errors.maxlength.requiredLength," caracteres.")}}function oe(r,o){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2,"La provincia es requerida."),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Location.errors&&t.Location.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Location.errors&&t.Location.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Location.errors||null==t.Location.errors.minlength?null:t.Location.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Location.errors&&t.Location.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Location.errors||null==t.Location.errors.maxlength?null:t.Location.errors.maxlength.requiredLength," caracteres.")}}function ie(r,o){if(1&r&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2,"El pa\xeds es requerido."),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Country.errors&&t.Country.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Country.errors&&t.Country.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Country.errors||null==t.Country.errors.minlength?null:t.Country.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Country.errors&&t.Country.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Country.errors||null==t.Country.errors.maxlength?null:t.Country.errors.maxlength.requiredLength," caracteres.")}}function se(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(2,"h2",3),e._uU(3,"Datos de direcci\xf3n"),e.qZA(),e.TgZ(4,"mat-card",4)(5,"div",5)(6,"label",6),e._uU(7,"Direcci\xf3n"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.address=s)}),e.qZA(),e.YNc(9,te,7,5,"div",8),e.qZA(),e.TgZ(10,"div",5)(11,"label",9),e._uU(12,"Codigo postal"),e.qZA(),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.cp=s)}),e.qZA(),e.YNc(14,re,7,5,"div",8),e.qZA(),e.TgZ(15,"div",5)(16,"label",11),e._uU(17,"Poblaci\xf3n"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.population=s)}),e.qZA(),e.YNc(19,ne,7,5,"div",8),e.qZA(),e.TgZ(20,"div",5)(21,"label",13),e._uU(22,"Provincia"),e.qZA(),e.TgZ(23,"input",14),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.location=s)}),e.qZA(),e.YNc(24,oe,7,5,"div",8),e.qZA(),e.TgZ(25,"div",5)(26,"label",15),e._uU(27,"Pa\xeds"),e.qZA(),e.TgZ(28,"input",16),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.country=s)}),e.qZA(),e.YNc(29,ie,7,5,"div",8),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.addressForm),e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(4),e.Q6J("ngModel",t.user.address),e.xp6(1),e.Q6J("ngIf",t.Address.invalid&&(t.Address.dirty||t.Address.touched)),e.xp6(4),e.Q6J("ngModel",t.user.cp),e.xp6(1),e.Q6J("ngIf",t.CP.invalid&&(t.CP.dirty||t.CP.touched)),e.xp6(4),e.Q6J("ngModel",t.user.population),e.xp6(1),e.Q6J("ngIf",t.Population.invalid&&(t.Population.dirty||t.Population.touched)),e.xp6(4),e.Q6J("ngModel",t.user.location),e.xp6(1),e.Q6J("ngIf",t.Location.invalid&&(t.Location.dirty||t.Location.touched)),e.xp6(4),e.Q6J("ngModel",t.user.country),e.xp6(1),e.Q6J("ngIf",t.Country.invalid&&(t.Country.dirty||t.Country.touched))}}let ae=(()=>{class r{constructor(t,n,s){this.dialog=t,this.formBuilder=n,this.authSrv=s,this.loading=!0,this.addressForm=this.formBuilder.group({}),this.addressFormShared=new e.vpe}emitFormGeneral(){this.addressFormShared.emit(this.addressForm)}ngOnInit(){this.userEdit=this.user,this.addressForm.addControl("Address",this.addAddressForm()),this.emitFormGeneral(),this.loading=!1}onSubmit(){console.log(this.user)}get Address(){return this.addressForm.get("Address").get("Address")}get CP(){return this.addressForm.get("Address").get("CP")}get Population(){return this.addressForm.get("Address").get("Population")}get Location(){return this.addressForm.get("Address").get("Location")}get Country(){return this.addressForm.get("Address").get("Country")}addAddressForm(){return this.formBuilder.group({Address:new i.NI(this.user.address,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(250)]),CP:new i.NI(this.user.cp,[i.kI.required,i.kI.minLength(5),i.kI.maxLength(5)]),Population:new i.NI(this.user.population,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(250)]),Location:new i.NI(this.user.location,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(250)]),Country:new i.NI(this.user.country,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(250)])})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(p.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-address"]],inputs:{user:"user",page:"page"},outputs:{addressFormShared:"addressFormShared"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],["autocomplete","off",1,"text-start","p-2",3,"formGroup","ngSubmit"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","Address",1,"solution"],[1,"form-group"],["for","Address"],["type","text","id","Address","formControlName","Address","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger mt-3 text-start",4,"ngIf"],["for","CP"],["type","text","id","CP","formControlName","CP","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Population"],["type","text","id","Population","formControlName","Population","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Location"],["type","text","id","Location","formControlName","Location","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Country"],["type","text","id","Country","formControlName","Country","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"alert","alert-danger","mt-3","text-start"],[3,"hidden"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,se,30,17,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.user))},dependencies:[d.O5,g.a8,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,i.x0,c.B],styles:["label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.form-group[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}form[_ngcontent-%COMP%]{border:0px;box-shadow:none}"]}),r})();function le(r,o){if(1&r&&(e.TgZ(0,"div",11)(1,"div",12),e._uU(2,"El correo electr\xf3nico es requerido."),e.qZA(),e.TgZ(3,"div",12),e._uU(4,"El correo electronico no es valido."),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Email.errors&&t.Email.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Email.errors&&t.Email.errors.pattern))}}function de(r,o){if(1&r&&(e.TgZ(0,"div",11)(1,"div",12),e._uU(2,"El telefono es requerido."),e.qZA(),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.TgZ(5,"div",12),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",!(null!=t.Phone.errors&&t.Phone.errors.required)),e.xp6(2),e.Q6J("hidden",!(null!=t.Phone.errors&&t.Phone.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.Phone.errors||null==t.Phone.errors.minlength?null:t.Phone.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.Phone.errors&&t.Phone.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.Phone.errors||null==t.Phone.errors.maxlength?null:t.Phone.errors.maxlength.requiredLength," caracteres.")}}function ue(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(2,"h2",3),e._uU(3,"Datos de contacto"),e.qZA(),e.TgZ(4,"mat-card",4)(5,"div",5)(6,"label",6),e._uU(7,"Correo electr\xf3nico"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.email=s)}),e.qZA(),e.YNc(9,le,5,2,"div",8),e.qZA(),e.TgZ(10,"div",5)(11,"label",9),e._uU(12,"Tel\xe9fono"),e.qZA(),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.user.telefon=s)}),e.qZA(),e.YNc(14,de,7,5,"div",8),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.contactForm),e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(4),e.Q6J("ngModel",t.user.email),e.xp6(1),e.Q6J("ngIf",t.Email.invalid&&(t.Email.dirty||t.Email.touched)),e.xp6(4),e.Q6J("ngModel",t.user.telefon),e.xp6(1),e.Q6J("ngIf",t.Phone.invalid&&(t.Phone.dirty||t.Phone.touched))}}let ce=(()=>{class r{constructor(t,n,s){this.dialog=t,this.formBuilder=n,this.authSrv=s,this.loading=!0,this.contactForm=this.formBuilder.group({}),this.contactFormShared=new e.vpe}emitFormGeneral(){this.contactFormShared.emit(this.contactForm)}ngOnInit(){this.contactForm.addControl("Contact",this.addContactForm()),this.emitFormGeneral(),this.loading=!1}onSubmit(){}get Email(){return this.contactForm.get("Contact").get("Email")}get Phone(){return this.contactForm.get("Contact").get("Phone")}get ContactName(){return this.contactForm.get("Contact").get("ContactName")}addContactForm(){return this.formBuilder.group({Email:new i.NI(this.user.email,[i.kI.required,i.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]),Phone:new i.NI(this.user.telefon,[i.kI.required,i.kI.minLength(9),i.kI.maxLength(20)])})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(p.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-contact"]],inputs:{user:"user"},outputs:{contactFormShared:"contactFormShared"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],["autocomplete","off",1,"text-start","p-2",3,"formGroup","ngSubmit"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","Contact",1,"solution"],[1,"form-group"],["for","Email"],["type","text","id","Email","formControlName","Email","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger mt-3 text-start",4,"ngIf"],["for","Phone"],["type","text","id","Phone","formControlName","Phone","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"alert","alert-danger","mt-3","text-start"],[3,"hidden"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,ue,15,11,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.user))},dependencies:[d.O5,g.a8,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,i.x0,c.B],styles:["label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.form-group[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}form[_ngcontent-%COMP%]{border:0px;box-shadow:none}"]}),r})();var me=l(3238),pe=l(455);function ge(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7),e._uU(2,"Permiso web"),e.qZA(),e._UZ(3,"div",8),e.TgZ(4,"mat-slide-toggle",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.user.active=s)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.user.active)}}function he(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(2,"h2",3),e._uU(3,"M\xe1s informaci\xf3n"),e.qZA(),e.TgZ(4,"mat-card",4),e.YNc(5,ge,5,1,"div",5),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.specialForm),e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin())}}let _e=(()=>{class r{constructor(t,n,s,a){this.dialog=t,this.formBuilder=n,this.dateAdapter=s,this.authSrv=a,this.loading=!0,this.specialForm=this.formBuilder.group({}),this.specialFormShared=new e.vpe,this.dateAdapter.setLocale("es-ES")}emitFormGeneral(){this.specialFormShared.emit(this.specialForm)}ngOnInit(){this.userEdit=this.user,this.specialForm.addControl("Special",this.addSpecialForm()),this.emitFormGeneral(),this.loading=!1}onSubmit(){}get Active(){return this.specialForm.get("Special").get("Active")}addSpecialForm(){return this.formBuilder.group({Active:new i.NI(this.user.active,[i.kI.required])})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(me._A),e.Y36(p.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-special"]],inputs:{user:"user",page:"page"},outputs:{specialFormShared:"specialFormShared"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],["autocomplete","off",1,"text-start","p-2",3,"formGroup","ngSubmit"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","Special",1,"solution"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","Active"],[2,"display","inline-block","width","20px"],["color","primary","formControlName","Active",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,he,6,8,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.user))},dependencies:[d.O5,g.a8,pe.Rr,i._Y,i.JJ,i.JL,i.sg,i.u,i.x0,c.B],styles:["label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.form-group[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.ng-valid[required][_ngcontent-%COMP%]:not(.mat-end-date, .mat-start-date)[_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]:not(.mat-end-date, .mat-start-date)[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form):not(.mat-end-date, .mat-start-date)[_ngcontent-%COMP%]{border-left:5px solid #a94442}form[_ngcontent-%COMP%]{border:0px;box-shadow:none}.form-field[_ngcontent-%COMP%]{margin:0 8px 16px 0}"]}),r})();function fe(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-multiselect-dropdown",5),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectedClientsList=s)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.selectedClientsList)("placeholder","Clientes")("settings",t.dropdownClients)("data",t.clientsList)}}function xe(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"h2",3),e._uU(2,"Clientes"),e.qZA(),e.TgZ(3,"mat-card",4),e.YNc(4,fe,2,4,"ng-container",1),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(1),e.Q6J("ngIf",0==t.loading)}}function Ce(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"form",2),e.YNc(2,xe,5,7,"ng-container",1),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.clientsForm),e.xp6(1),e.Q6J("ngIf",!t.user.isClient)}}let Fe=(()=>{class r{constructor(t,n,s,a,h){this.dialog=t,this.formBuilder=n,this.usersSrv=s,this.userSrv=a,this.authSrv=h,this.autoCloseModels=!1,this.loading=!0,this.clientsForm=this.formBuilder.group({}),this.clientsList=[],this.selectedClientsList=[],this.loadClients=!1,this.loadClientsSelecteds=!1,this.dropdownClients={},this.clientsFormShared=new e.vpe}emitFormGeneral(){this.clientsFormShared.emit(this.clientsForm)}ngOnInit(){this.loading=!0,this.dropdownClients={singleSelection:!1,closeDropDownOnSelection:this.autoCloseModels,showSelectedItemsAtTop:!0,idField:"Id",textField:"Name",selectAllText:"Seleccionar todo",unSelectAllText:"Deseleccionar todo",allowSearchFilter:!0,noDataAvailablePlaceholderText:"No hay usuarios disponibles",searchPlaceholderText:"Buscar cliente",clearSearchFilter:!0},this.clientsForm.addControl("Clients",this.formBuilder.group({SelectedClientsList:new i.NI(this.selectedClientsList,[])})),this.getClientsUser(),this.getDefaultClients()}get SelectedClientsList(){return this.clientsForm.get("Clients").get("SelectedClientsList")}getDefaultClients(){this.loading=!0,this.selectedClientsList=[],this.userSrv.getClientsByIdManufacturer(this.user).subscribe({next:t=>{this.selectedClientsList=t,console.log(this.selectedClientsList)},error:t=>{console.log("error getClients"),this.loadClientsSelecteds=!0,this.loadComplete()},complete:()=>{this.loadClientsSelecteds=!0,this.loadComplete()}})}getClientsUser(){this.loading=!0,this.clientsList=[],this.usersSrv.getClients(0,1e4,"Name","ASC").subscribe({next:t=>{this.clientsList=t.Result,console.log(this.clientsList)},error:t=>{console.log("error getClients"),this.loadClients=!0,this.loadComplete()},complete:()=>{this.loadClients=!0,this.loadComplete()}})}loadComplete(){1==this.loadClients&&1==this.loadClientsSelecteds&&(this.loading=!1,this.emitFormGeneral())}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(b.f),e.Y36(x.K),e.Y36(p.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-clients"]],inputs:{user:"user",autoCloseModels:"autoCloseModels"},outputs:{clientsFormShared:"clientsFormShared"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],["autocomplete","off",1,"text-start","p-2",3,"formGroup"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","Clients",1,"solution",2,"min-height","400px"],["id","clients","formControlName","SelectedClientsList",3,"ngModel","placeholder","settings","data","ngModelChange"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,Ce,3,2,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.user))},dependencies:[d.O5,g.a8,i._Y,i.JJ,i.JL,i.sg,i.u,i.x0,c.B,v.OP]}),r})();var ve=l(3856);function we(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"h2",2),e._uU(2,"Modelos"),e.qZA(),e.TgZ(3,"mat-card",3),e._UZ(4,"app-list-device-models",4),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(1),e.Q6J("userInput",t.user)("showNewModel",!0)}}let be=(()=>{class r{constructor(){this.user=null,this.loading=!0}ngOnInit(){this.loading=!1}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-device-models"]],inputs:{user:"user"},decls:2,vars:2,consts:[[3,"loading"],[4,"ngIf"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column",1,"solution",2,"min-height","400px"],[3,"userInput","showNewModel"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,we,5,8,"ng-container",1)),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",n.user.isManufacturer))},dependencies:[d.O5,g.a8,c.B,ve.p]}),r})();var Ue=l(4785);function Se(r,o){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("hidden",!(null!=t.NewPassword.errors&&t.NewPassword.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.NewPassword.errors||null==t.NewPassword.errors.minlength?null:t.NewPassword.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.NewPassword.errors&&t.NewPassword.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.NewPassword.errors||null==t.NewPassword.errors.maxlength?null:t.NewPassword.errors.maxlength.requiredLength," caracteres.")}}function Ze(r,o){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"div",11),e._uU(6,"Las contrase\xf1as no coinciden."),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("hidden",!(null!=t.NewPasswordRepeat.errors&&t.NewPasswordRepeat.errors.minlength)),e.xp6(1),e.hij("M\xednimo ",null==t.NewPasswordRepeat.errors||null==t.NewPasswordRepeat.errors.minlength?null:t.NewPasswordRepeat.errors.minlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.NewPasswordRepeat.errors&&t.NewPasswordRepeat.errors.maxlength)),e.xp6(1),e.hij("M\xe1ximo ",null==t.NewPasswordRepeat.errors||null==t.NewPasswordRepeat.errors.maxlength?null:t.NewPasswordRepeat.errors.maxlength.requiredLength," caracteres."),e.xp6(1),e.Q6J("hidden",!(null!=t.NewPasswordRepeat.errors&&t.NewPasswordRepeat.errors.noEsIgual))}}let Pe=(()=>{class r{constructor(t,n,s,a){this.dialog=t,this.formBuilder=n,this.userValidator=s,this.authSrv=a,this.loading=!0,this.passwordForm=this.formBuilder.group({}),this.passwordFormShared=new e.vpe}emitFormGeneral(){this.passwordFormShared.emit(this.passwordForm)}ngOnInit(){this.passwordForm.addControl("Password",this.addPasswordForm()),this.emitFormGeneral(),this.loading=!1}get NewPassword(){return this.passwordForm.get("Password").get("NewPassword")}get NewPasswordRepeat(){return this.passwordForm.get("Password").get("NewPasswordRepeat")}addPasswordForm(){return this.formBuilder.group({NewPassword:new i.NI(this.newPassword,[i.kI.minLength(3),i.kI.maxLength(25)]),NewPasswordRepeat:new i.NI(this.newPasswordRepeat,[i.kI.minLength(3),i.kI.maxLength(25)])},{validator:this.userValidator.checkMatchValidator("NewPassword","NewPasswordRepeat")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(Ue.A),e.Y36(p.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-password"]],inputs:{newPassword:"newPassword",newPasswordRepeat:"newPasswordRepeat"},outputs:{passwordFormShared:"passwordFormShared"},decls:15,vars:12,consts:[[3,"loading"],["autocomplete","off",1,"text-start","p-2",3,"formGroup"],[1,"text-center","mt-3","mb-3"],["fxFlex","","fxLayoutAlign","start center","fxLayout","column","formGroupName","Password",1,"solution"],[1,"form-group"],["for","NewPassword"],["type","text","id","NewPassword","formControlName","NewPassword",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger mt-3 text-start",4,"ngIf"],["for","NewPasswordRepeat"],["type","text","id","NewPasswordRepeat","formControlName","NewPasswordRepeat",1,"form-control",3,"ngModel","ngModelChange"],[1,"alert","alert-danger","mt-3","text-start"],[3,"hidden"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.TgZ(1,"form",1)(2,"h2",2),e._uU(3,"Cambiar contrase\xf1a"),e.qZA(),e.TgZ(4,"mat-card",3)(5,"div",4)(6,"label",5),e._uU(7,"Nueva contrase\xf1a"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(a){return n.newPassword=a}),e.qZA(),e.YNc(9,Se,5,4,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12,"Repetir nueva contrase\xf1a"),e.qZA(),e.TgZ(13,"input",9),e.NdJ("ngModelChange",function(a){return n.newPasswordRepeat=a}),e.qZA(),e.YNc(14,Ze,7,5,"div",7),e.qZA()()()),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("formGroup",n.passwordForm),e.xp6(3),e.Udp("border-radius","0","px")("padding-top","20","px")("margin-bottom","20","px"),e.xp6(4),e.Q6J("ngModel",n.newPassword),e.xp6(1),e.Q6J("ngIf",n.NewPassword.value&&n.NewPassword.invalid&&(n.NewPassword.dirty||n.NewPassword.touched)),e.xp6(4),e.Q6J("ngModel",n.newPasswordRepeat),e.xp6(1),e.Q6J("ngIf",n.NewPasswordRepeat.value&&n.NewPasswordRepeat.invalid&&(n.NewPasswordRepeat.dirty||n.NewPasswordRepeat.touched)))},dependencies:[d.O5,g.a8,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,c.B],styles:["label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.form-group[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}form[_ngcontent-%COMP%]{border:0px;box-shadow:none}"]}),r})();function Me(r,o){if(1&r&&(e._uU(0," Datos informativos "),e.TgZ(1,"mat-icon",10),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("hidden",t.editClientFormSharedValid)}}function Ne(r,o){1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,Me,3,1,"ng-template",7),e.qZA())}function Te(r,o){if(1&r&&(e._uU(0," General "),e.TgZ(1,"mat-icon",12),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("hidden",t.editFormSharedValid)}}function Ae(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-user",13),e.NdJ("editFormShared",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.updateEditFormShared(s))}),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("user",t.user)("page",t.page)}}function Ie(r,o){if(1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,Te,3,1,"ng-template",7),e.YNc(2,Ae,1,2,"app-edit-user",11),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.user)}}function Ee(r,o){if(1&r&&(e._uU(0," Contacto "),e.TgZ(1,"mat-icon",14),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",t.contactFormSharedValid)}}function Je(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-user-contact",15),e.NdJ("contactFormShared",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateContactFormShared(s))}),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("user",t.user)}}function qe(r,o){if(1&r&&(e._uU(0," Direcci\xf3n "),e.TgZ(1,"mat-icon",16),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",t.addressFormSharedValid)}}function ye(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-user-address",17),e.NdJ("addressFormShared",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateAddressFormShared(s))}),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("user",t.user)}}function Qe(r,o){if(1&r&&(e._uU(0," Apariencia "),e.TgZ(1,"mat-icon",18),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("hidden",t.themeFormSharedValid)}}function Le(r,o){1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,Qe,3,1,"ng-template",7),e.qZA())}function Oe(r,o){if(1&r&&(e._uU(0," M\xe1s "),e.TgZ(1,"mat-icon",10),e._uU(2,"error"),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("hidden",t.specialFormSharedValid)}}function Ye(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-user-special",20),e.NdJ("specialFormShared",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.updateSpecialFormShared(s))}),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("user",t.user)}}function Be(r,o){if(1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,Oe,3,1,"ng-template",7),e.YNc(2,Ye,1,1,"app-edit-user-special",19),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.user)}}function De(r,o){1&r&&e._uU(0," Modelos ")}function Ge(r,o){if(1&r&&e._UZ(0,"app-edit-user-device-models",22),2&r){const t=e.oxw(3);e.Q6J("user",t.user)}}function ke(r,o){if(1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,De,1,0,"ng-template",7),e.YNc(2,Ge,1,1,"app-edit-user-device-models",21),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.user)}}function Re(r,o){1&r&&e._uU(0," Fabricantes ")}function Ve(r,o){1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,Re,1,0,"ng-template",7),e.qZA())}function je(r,o){1&r&&e._uU(0," Clientes ")}function He(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-user-clients",24),e.NdJ("clientsFormShared",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.updateClientsFormShared(s))}),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("user",t.user)}}function Ke(r,o){if(1&r&&(e.TgZ(0,"mat-tab"),e.YNc(1,je,1,0,"ng-template",7),e.YNc(2,He,1,1,"app-edit-user-clients",23),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.user)}}function ze(r,o){1&r&&e._uU(0," Cambiar contrase\xf1a ")}function Xe(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,ze,1,0,"ng-template",7),e.TgZ(2,"app-edit-user-password",25),e.NdJ("passwordFormShared",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updatePasswordFormShared(s))}),e.qZA()()}}function $e(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tab-group",5),e.NdJ("selectedIndexChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.page=s)}),e.YNc(1,Ne,2,0,"mat-tab",6),e.YNc(2,Ie,3,1,"mat-tab",6),e.TgZ(3,"mat-tab"),e.YNc(4,Ee,3,1,"ng-template",7),e.YNc(5,Je,1,1,"app-edit-user-contact",8),e.qZA(),e.TgZ(6,"mat-tab"),e.YNc(7,qe,3,1,"ng-template",7),e.YNc(8,ye,1,1,"app-edit-user-address",9),e.qZA(),e.YNc(9,Le,2,0,"mat-tab",6),e.YNc(10,Be,3,1,"mat-tab",6),e.YNc(11,ke,3,1,"mat-tab",6),e.YNc(12,Ve,2,0,"mat-tab",6),e.YNc(13,Ke,3,1,"mat-tab",6),e.YNc(14,Xe,3,0,"mat-tab",6),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("selectedIndex",t.page),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isClient()),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin()||t.isManufacturerOfClient),e.xp6(3),e.Q6J("ngIf",t.user),e.xp6(3),e.Q6J("ngIf",t.user),e.xp6(1),e.Q6J("ngIf",(1==t.authSrv.isAdmin()||t.authSrv.isManufacturer()&&(null==t.authSrv.currentUserValue?null:t.authSrv.currentUserValue.id)==t.user.id)&&!t.user.isAdmin),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin()),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin()&&t.user&&t.user.rol&&t.user.isManufacturer),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin()&&t.user&&t.user.rol&&t.user.isClient),e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin()&&t.user&&t.user.rol&&t.user.isManufacturer),e.xp6(1),e.Q6J("ngIf",(null==t.authSrv.currentUserValue?null:t.authSrv.currentUserValue.id)==t.user.id)}}let We=(()=>{class r{constructor(t,n,s,a,h,f,S,xt,Ct){this.dialog=t,this.formBuilder=n,this.breadcrumbService=s,this.authSrv=a,this.userSrv=h,this.usersSrv=f,this.themeSrv=S,this.utilsSrv=xt,this.route=Ct,this.userInput=null,this.currentPassword="",this.lastMail="",this.editFormShared=this.formBuilder.group({}),this.addressFormShared=this.formBuilder.group({}),this.contactFormShared=this.formBuilder.group({}),this.specialFormShared=this.formBuilder.group({}),this.themeFormShared=this.formBuilder.group({}),this.devicesFormShared=this.formBuilder.group({}),this.passwordFormShared=this.formBuilder.group({}),this.editClientFormShared=this.formBuilder.group({}),this.clientsFormShared=this.formBuilder.group({}),this.manufacturersFormShared=this.formBuilder.group({}),this.newPassword="",this.newPasswordRepeat="",this.loading=!0,this.user=null,this.originalUser=null,this.isManufacturerOfClient=!1,this.listaUsuarios=[],this.IdUser=Number(this.route.snapshot.paramMap.get("id"))??this.IdUser??null,this.page=Number(this.route.snapshot.paramMap.get("page"))??0}updateEditFormShared(t){console.log("updateEditFormShared"),this.editFormShared=t}updateAddressFormShared(t){this.addressFormShared=t}updateContactFormShared(t){console.log("updateContactFormShared"),this.contactFormShared=t}updateSpecialFormShared(t){this.specialFormShared=t}updateThemeFormShared(t){console.log("getFormGeneral"),this.themeFormShared=t}updateDevicesFormShared(t){console.log("updateDevicesFormShared"),this.devicesFormShared=t,null==this.devicesFormShared.get("Devices").get("vDevices")&&console.log("vDevices unde")}updatePasswordFormShared(t){this.passwordFormShared=t}updateEditClientFormShared(t){console.log("EditClient"),this.editClientFormShared=t}updateClientsFormShared(t){console.log("getFormGeneral"),this.clientsFormShared=t}updateManufacturerFormShared(t){console.log("getFormGeneral"),this.manufacturersFormShared=t}ngOnInit(){this.loading=!0,this.userInput?this.IdUser=this.userInput.id:this.breadcrumbService.setBreadCrumbUrl("users/list","Gesti\xf3n de usuarios"),this.userSrv.getUserById(this.IdUser).subscribe({next:t=>{this.user=new m.n5(t),this.lastMail=this.user.email??"",this.originalUser=Object.assign({},t),null==this.userInput&&(this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/detail",this.user.nombre??" "+this.user.apellidos??""),this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/edit","Editar")),console.log(this.originalUser),this.authSrv.isManufacturer()&&this.user.isClient?(console.log("isManufacturer"),this.usersSrv.getList(0,1e5,"Name","ASC").subscribe({next:n=>{this.listaUsuarios=n.result.map(s=>new m.n5(s)),this.listaUsuarios.forEach(s=>{s.id==this.user.id&&(this.isManufacturerOfClient=!0)})},error:n=>{},complete:()=>{this.loading=!1}})):this.loading=!1},error:t=>{this.loading=!1},complete:()=>{}})}get editFormSharedValid(){return this.editFormShared.get("User")?.valid??!1}get contactFormSharedValid(){return this.contactFormShared.get("Contact")?.valid??!1}get themeFormSharedValid(){return this.themeFormShared.get("Theme")?.valid??!1}get addressFormSharedValid(){return this.addressFormShared.get("Address")?.valid??!1}get specialFormSharedValid(){return this.specialFormShared.get("Special")?.valid??!1}get editClientFormSharedValid(){return this.editClientFormShared.get("EditClient")?.valid??!1}get clientsFormSharedValid(){return this.clientsFormShared.get("Clients")?.valid??!1}get manufacturersFormSharedValid(){return this.manufacturersFormShared.get("Manufacturers")?.valid??!1}get devicesFormSharedValid(){return this.devicesFormShared.get("Devices")?.valid??!1}get passwordFormSharedValid(){return this.passwordFormShared.get("Password")?.valid??!1}get validAllForm(){return this.editFormSharedValid&&this.contactFormSharedValid&&this.themeFormSharedValid&&this.addressFormSharedValid&&this.specialFormSharedValid}get validClientForm(){return this.contactFormSharedValid&&this.addressFormSharedValid&&this.editClientFormSharedValid}get validManufacturerForm(){return this.contactFormSharedValid&&this.addressFormSharedValid&&this.themeFormSharedValid}onSubmit(){if(console.log(this.user),console.log("editFormShared ",this.editFormShared.get("User")?.valid),console.log("contactFormShared ",this.contactFormShared.get("Contact")?.valid),console.log("themeFormShared ",this.themeFormShared.get("Theme")?.valid),console.log("addressFormShared ",this.addressFormShared.get("Address")?.valid),console.log("specialFormShared",this.specialFormShared.get("Special")?.valid),console.log("devicesFormShared",this.devicesFormShared.get("Devices")?.valid),console.log("devicesFormShared",this.editClientFormShared.get("EditClient")?.valid),console.log("Clients",this.clientsFormShared.get("Clients")),console.log("Manufacturers",this.manufacturersFormShared.get("Manufacturers")),console.log(this.validAllForm),this.authSrv.currentUserValue?.id==this.user.id&&0==this.passwordFormSharedValid)return console.log(this.passwordFormShared.get("Password")),void this.utilsSrv.infoModal("La nueva contrase\xf1a no coincide.",void 0,"Error al guardar los datos");this.authSrv.isAdmin()&&(this.validAllForm?this.saveChange():this.openSaveModal()),this.authSrv.isClient()&&(this.validClientForm?this.saveChange():this.openSaveModal()),this.authSrv.isManufacturer()&&(this.validManufacturerForm?this.saveChange():this.openSaveModal())}saveChange(){if(this.authSrv.currentUserValue?.id!=this.user.id||this.lastMail==this.user.email||""!=this.currentPassword){if(this.authSrv.currentUserValue?.id==this.user.id&&""==this.currentPassword&&""!=this.passwordFormShared.get("Password")?.get("NewPassword")?.value&&null!=this.passwordFormShared.get("Password")?.get("NewPassword")?.value)return console.log("NewPasswor"),void this.openPasswordModal();if(this.loading=!0,console.log("savechanges"),this.authSrv.currentUserValue?.id==this.user.id){let t=this.user;t.CurrentPassword=this.currentPassword,""!=this.passwordFormShared.get("Password")?.get("NewPassword")?.value&&null!=this.passwordFormShared.get("Password")?.get("NewPassword")?.value&&(t.NewPassword=this.passwordFormShared.get("Password")?.get("NewPassword")?.value,t.NewPassordRepeat=this.passwordFormShared.get("Password")?.get("NewPasswordRepeat")?.value),console.log("aux"),console.log(t),this.userSrv.saveChanges(t).subscribe({next:n=>{this.user=null,console.log("OK"),this.user=new m.n5(n),this.themeSrv.deletePreviewTheme(),this.originalUser=new m.n5(Object.assign({},n)),null==this.userInput&&(this.breadcrumbService.setBreadCrumbUrl("users/list","Gesti\xf3n de usuarios"),this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/detail",this.user.nombre??" "),this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/edit","Editar"))},error:n=>{this.currentPassword="","MODAL"==n.status&&this.utilsSrv.infoModal(n.msg,void 0,n.title),this.loading=!1},complete:()=>{this.loading=!1,this.currentPassword=""}})}else this.userSrv.saveChangesById(this.user).subscribe({next:t=>{this.user=null,console.log("OK"),this.user=new m.n5(t),this.themeSrv.deletePreviewTheme(),this.originalUser=new m.n5(Object.assign({},t)),null==this.userInput&&(this.breadcrumbService.setBreadCrumbUrl("users/list","Gesti\xf3n de usuarios"),this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/detail",this.user.nombre??" "),this.breadcrumbService.addBreadCrumb("users/"+this.IdUser+"/edit","Editar"))},error:()=>{console.log("ERROR")},complete:()=>{this.loading=!1}})}else this.openPasswordModal()}openPasswordModal(){let t=new q.u_;t.Title="Atenci\xf3n",t.Body="Va a modificar datos sensibles como el correo electr\xf3nico o la contrase\xf1a, introduzca la contrase\xf1a actual:",t.BtnAccept="Continuar",t.ClassType="warning",this.dialog.open(H,{autoFocus:"dialog",width:"auto",height:"auto",data:t,closeOnNavigation:!1,disableClose:!0,panelClass:"custom-modalbox",position:{top:"150px"}}).afterClosed().subscribe(s=>{console.log("Input: ",s),""!=s&&(this.currentPassword=s,this.saveChange())})}openSaveModal(){let t=new q.u_;t.Title="Atenci\xf3n",t.Body="Faltan campos obligatorios, quiere guardar de todas formar?",t.BtnAccept="Guardar",t.ClassType="warning",this.dialog.open(j.Y,{autoFocus:"dialog",width:"auto",height:"auto",data:t,closeOnNavigation:!1,disableClose:!0,panelClass:"custom-modalbox",position:{top:"150px"}}).afterClosed().subscribe(s=>{s&&this.saveChange()})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(w.p),e.Y36(p.$),e.Y36(x.K),e.Y36(b.f),e.Y36(P.f),e.Y36(C.F),e.Y36(_.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user-form"]],inputs:{userInput:"userInput",pageInput:"pageInput",IdUser:"IdUser"},decls:6,vars:2,consts:[[3,"loading"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange",4,"ngIf"],[1,"mt-2"],[1,"text-right",2,"flex-direction","row-reverse"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],[4,"ngIf"],["mat-tab-label",""],[3,"user","contactFormShared",4,"ngIf"],[3,"user","addressFormShared",4,"ngIf"],[1,"tab-icon","error-1","errorSpecial",3,"hidden"],[3,"user","page","editFormShared",4,"ngIf"],[1,"tab-icon","error-0","errorEdit",3,"hidden"],[3,"user","page","editFormShared"],[1,"tab-icon","error-1","errorContact",3,"hidden"],[3,"user","contactFormShared"],[1,"tab-icon","error-1","errorAddress",3,"hidden"],[3,"user","addressFormShared"],[1,"tab-icon","error-1","errorTheme",3,"hidden"],[3,"user","specialFormShared",4,"ngIf"],[3,"user","specialFormShared"],[3,"user",4,"ngIf"],[3,"user"],[3,"user","clientsFormShared",4,"ngIf"],[3,"user","clientsFormShared"],[3,"passwordFormShared"]],template:function(t,n){1&t&&(e._UZ(0,"app-loading-custom",0),e.YNc(1,$e,15,11,"mat-tab-group",1),e.TgZ(2,"section",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.onSubmit()}),e._uU(5,"Guardar"),e.qZA()()()),2&t&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading))},dependencies:[d.O5,E.Hw,J.lW,U.SP,U.uD,U.uX,c.B,ee,ae,ce,_e,Fe,be,Pe],styles:[".tab-content[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;border-left:1px solid #dee2e6;border-right:1px solid #dee2e6}label[_ngcontent-%COMP%]{font-size:16px;text-align:left!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;flex-shrink:50% 50%}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:300px;flex:1}.tab-icon[_ngcontent-%COMP%]{margin-left:8px;color:red}"]}),r})();function et(r,o){if(1&r&&e._UZ(0,"user-icon",9),2&r){const t=e.oxw(3);e.Q6J("user",t.user)}}function tt(r,o){if(1&r&&(e.TgZ(0,"h1"),e.YNc(1,et,1,1,"user-icon",8),e._uU(2," Editar cuenta "),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==t.authSrv.isAdmin())}}function rt(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",3),e.YNc(6,tt,3,1,"h1",2),e.qZA()()()()(),e.TgZ(7,"app-block-group-dashboard")(8,"app-block-dashboard"),e._UZ(9,"app-edit-user-form",7),e.qZA()(),e.BQk()),2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.user),e.xp6(3),e.Q6J("userInput",t.user)}}let nt=(()=>{class r{constructor(t,n,s,a,h,f,S){this.dialog=t,this.formBuilder=n,this.breadcrumbService=s,this.authSrv=a,this.userSrv=h,this.themeSrv=f,this.route=S,this.loading=!0,this.user=null,this.originalUser=null,s.setBreadCrumbUrl("account","Cuenta"),s.addBreadCrumb("account/edit","Editar"),this.page=Number(this.route.snapshot.paramMap.get("page"))??0}ngOnInit(){this.loading=!0,this.userSrv.getUserById(this.authSrv.currentUserValue?.id).subscribe({next:t=>{this.user=new m.n5(t),this.originalUser=new m.n5(t)},error:t=>{},complete:()=>{this.loading=!1}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.uw),e.Y36(i.qu),e.Y36(w.p),e.Y36(p.$),e.Y36(x.K),e.Y36(P.f),e.Y36(_.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile-edit-page"]],decls:5,vars:2,consts:[[1,"main-page","container-fluid","pt-3","pl-0","pr-0","espace"],[3,"loading"],[4,"ngIf"],[1,"col-12"],[1,"my-4"],[1,"container-fluid"],[1,"row","align-items-center"],[3,"userInput"],[3,"user",4,"ngIf"],[3,"user"]],template:function(t,n){1&t&&(e._UZ(0,"app-breadcrumb"),e.TgZ(1,"div",0),e._UZ(2,"app-loading-custom",1),e.YNc(3,rt,10,2,"ng-container",2),e.qZA(),e._UZ(4,"app-footer")),2&t&&(e.xp6(2),e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading))},dependencies:[d.O5,M.c,N.o,T.q,A.L,c.B,V,We]}),r})();var ot=l(4810);function it(r,o){if(1&r&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.TgZ(3,"span",1),e._uU(4),e.ALo(5,"number"),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,3,t.dateInput,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngClass",t.myMath.abs(t.calculateDiff(t.dateInput))<31?"licencia-time-warning":""),e.xp6(1),e.hij(" Restante: ",e.xi3(5,6,t.myMath.abs(t.calculateDiff(t.dateInput)),"1.0-0")," d\xedas. ")}}function st(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"span",2),e._uU(2,"Licencia expirada!"),e.qZA(),e.TgZ(3,"span",3),e._uU(4),e.ALo(5,"number"),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.hij("Hace ",e.xi3(5,1,t.myMath.abs(t.calculateDiff(t.dateInput)),"1.0-0")," d\xedas.")}}let at=(()=>{class r{constructor(t,n){this.utilsSrv=t,this.changeDedectionRef=n,this.myMath=Math,this.loading=!0}ngAfterContentChecked(){this.changeDedectionRef.detectChanges()}ngOnInit(){this.loading=!1,this.changeDedectionRef.detectChanges()}calculateDiff(t){return this.utilsSrv.calculateDiff(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.F),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-row-license"]],inputs:{dateInput:"dateInput"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"licencia-time",3,"ngClass"],[1,"licencia-expirada"],[1,"licencia-time"]],template:function(t,n){1&t&&(e.YNc(0,it,6,9,"ng-container",0),e.YNc(1,st,6,4,"ng-container",0)),2&t&&(e.Q6J("ngIf",0==n.loading&&n.dateInput&&n.calculateDiff(n.dateInput)<0),e.xp6(1),e.Q6J("ngIf",0==n.loading&&n.dateInput&&n.calculateDiff(n.dateInput)>0))},dependencies:[d.mk,d.O5,d.JJ,d.uU],styles:[".licencia-expirada[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:15px}.licencia-time[_ngcontent-%COMP%]{padding-left:15px}.licencia-time-warning[_ngcontent-%COMP%]{color:#ffc400;font-weight:700}"],changeDetection:0}),r})();function lt(r,o){1&r&&e._UZ(0,"i",10)}function dt(r,o){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,lt,1,0,"i",6),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"app-row-license",7),e.qZA(),e.TgZ(6,"td",8),e._UZ(7,"i",9),e.qZA()()),2&r){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",3==t.id||6==t.id),e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(2),e.Q6J("dateInput",t.info.finish_at)}}function ut(r,o){if(1&r&&(e.TgZ(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),e._uU(5,"Tipo de licencia"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"Fecha expiraci\xf3n"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"Acciones"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,dt,8,3,"tr",5),e.qZA()()()),2&r){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.user.licencias)}}let ct=(()=>{class r{constructor(t){this.utilsSrv=t,this.myMath=Math,this.diff=0}ngOnInit(){}calculateDiff(t){return this.utilsSrv.calculateDiff(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-subscription-information"]],inputs:{user:"user"},decls:3,vars:1,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","w-100",2,"width","100%"],["scope","col",2,"color","black"],["scope","col",1,"text-right",2,"color","black"],[4,"ngFor","ngForOf"],["class","fas fa-gem fa-md pl-3","style","color:rgb(32, 173, 50)",4,"ngIf"],[3,"dateInput"],[1,"text-right","c-pointer"],[1,"fas","fa-edit","fa-md","pl-3","text-primary"],[1,"fas","fa-gem","fa-md","pl-3",2,"color","rgb(32, 173, 50)"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Datos subscripci\xf3n"),e.qZA(),e.YNc(2,ut,12,1,"div",0)),2&t&&(e.xp6(2),e.Q6J("ngIf",n.user&&n.user.licencias))},dependencies:[d.sg,d.O5,at],styles:[".licencia-expirada[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:15px}.licencia-time[_ngcontent-%COMP%]{padding-left:15px}.licencia-time-warning[_ngcontent-%COMP%]{color:#ffc400;font-weight:700}"]}),r})();function mt(r,o){if(1&r&&e._UZ(0,"app-detail-public-user",7),2&r){const t=e.oxw(2);e.Q6J("user",t.user)}}function pt(r,o){if(1&r&&e._UZ(0,"app-subscription-information",8),2&r){const t=e.oxw(2);e.Q6J("user",t.user)}}function gt(r,o){if(1&r&&(e.TgZ(0,"app-block-group-dashboard")(1,"div",3),e.YNc(2,mt,1,1,"app-detail-public-user",4),e.qZA(),e.TgZ(3,"div",5)(4,"app-block-dashboard"),e.YNc(5,pt,1,1,"app-subscription-information",6),e.qZA()()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.user),e.xp6(3),e.Q6J("ngIf",t.user)}}const ht=[{path:"",children:[{path:"",component:(()=>{class r{constructor(t,n,s,a){this.breadcrumbService=t,this.authSrv=n,this.userSrv=s,this.route=a,this.user=null,this.loading=!0,this.breadcrumbService.setBreadCrumbUrl("account","Cuenta")}ngOnInit(){this.loading=!0,this.loadUser()}loadUser(){this.user=null,console.log("loadUser: ",this.authSrv.currentUserValue?.id),this.userSrv.getUserByToken().subscribe({next:t=>{this.user=new m.n5(t),console.log("user1",this.user),this.breadcrumbService.setBreadCrumbUrl("account","Cuenta de "+this.user.nombre+" "+this.user.apellidos)},error:()=>{},complete:()=>{this.loading=!1}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(w.p),e.Y36(p.$),e.Y36(x.K),e.Y36(_.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile-page"]],decls:5,vars:2,consts:[[1,"main-page","container-fluid","pt-3","pl-0","pr-0","espace"],[3,"loading"],[4,"ngIf"],[1,"col-12",2,"display","block"],["editSource","account",3,"user",4,"ngIf"],[1,"col-12","col-md-6",2,"display","block"],[3,"user",4,"ngIf"],["editSource","account",3,"user"],[3,"user"]],template:function(t,n){1&t&&(e._UZ(0,"app-breadcrumb"),e.TgZ(1,"div",0),e._UZ(2,"app-loading-custom",1),e.YNc(3,gt,6,2,"app-block-group-dashboard",2),e.qZA(),e._UZ(4,"app-footer")),2&t&&(e.xp6(2),e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("ngIf",0==n.loading))},dependencies:[d.O5,M.c,N.o,T.q,A.L,c.B,ot.y,ct]}),r})()},{path:"edit",component:nt}]}];let _t=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(ht),_.Bz]}),r})(),ft=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,F.y,y.I,Q.m,F.y,i.u5,i.UX,_t,L.T,O.e4,v.ZQ,Y.UsersModule,F.y,v.ZQ]}),r})()}}]);